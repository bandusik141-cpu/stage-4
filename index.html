<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Этап 4 — Всё в одном</title>

<style>
html, body {
    margin: 0;
    padding: 0;
    background: black;
    color: #e0e0e0;
    font-family: monospace;
    overflow-x: hidden;
}

/* ❄️ СНЕЖИНКИ */
.snowflake {
    position: fixed;
    top: -10px;
    color: white;
    user-select: none;
    pointer-events: none;
    z-index: 0;
    animation-name: fall;
    animation-timing-function: linear;
}

@keyframes fall {
    to {
        transform: translateY(110vh);
    }
}

.container {
    width: 80%;
    margin: 0 auto;
    padding-top: 60px;
    position: relative;
    z-index: 1;
}

h1 {
    text-align: center;
    letter-spacing: 4px;
    margin-bottom: 50px;
    font-size: 26px;
}

.cipher {
    margin-bottom: 26px;
    white-space: pre-wrap;
    font-size: 20px;
}

.input-block {
    margin-top: 50px;
}

input {
    background: black;
    border: 1px solid #555;
    color: #fff;
    padding: 10px;
    width: 320px;
    font-family: monospace;
    font-size: 16px;
}

button {
    background: black;
    color: #aaa;
    border: 1px solid #555;
    padding: 10px 14px;
    margin-left: 10px;
    cursor: pointer;
    font-family: monospace;
}

button:hover {
    color: white;
    border-color: white;
}

.message {
    margin-top: 16px;
    color: #777;
    font-size: 15px;
}

.gap {
    height: 120vh;
}

.scroll-text {
    font-size: 16px;
    opacity: 0.75;
}

.final {
    margin-top: 260vh;
    border-top: 1px solid #333;
    padding-top: 70px;
}
</style>
</head>

<body>

<!-- ❄️ СНЕЖИНКИ -->
<script>
for (let i = 0; i < 90; i++) {
    const snow = document.createElement("div");
    snow.className = "snowflake";
    snow.textContent = "❄";
    snow.style.left = Math.random() * 100 + "vw";
    snow.style.fontSize = (Math.random() * 12 + 10) + "px";
    snow.style.animationDuration = (Math.random() * 12 + 10) + "s";
    snow.style.opacity = Math.random();
    document.body.appendChild(snow);
}
</script>

<div class="container">

<h1>ЭТАП 4 — ВСЁ В ОДНОМ</h1>

<div class="cipher">[1] 01101000 11001001 01011100 01000111</div>
<div class="cipher">[2] ZW5vdWdo</div>
<div class="cipher">[3] VJKU YJ VJKU YJ</div>
<div class="cipher">[4] 8-23-1-20-9-20</div>
<div class="cipher">[5] ⌇⍜⋏⏁⟟⋏⎍⟒</div>
<div class="cipher">[6] ⠓⠁⠧⠑⠀⠽⠕⠥⠀⠞⠗⠊⠑⠙⠀⠞⠓⠊⠎⠦</div>
    <div class="cipher">
[?] 01001110 01101111 01110100 00100000 01100101 01101110 01101111 01110101 01100111 01101000
</div>

<div class="cipher">
[?] NOT ENOUGH DATA
</div>

<div class="cipher">
[?] Повторение не приводит к результату.
</div>

<div class="cipher">
[?] Все шесть элементов не складываются в ответ.
</div>

<div class="cipher">
[?] Возможно, порядок имеет значение.
</div>

<div class="cipher">
[?] Возможно, нет.
</div>


<!-- ФЕЙКОВЫЙ ВВОД -->
<div class="input-block">
    <div>Введите ответ:</div>
    <input id="fakeInput" type="text">
    <button onclick="fakeCheck()">OK</button>
    <div id="fakeMsg" class="message"></div>
</div>

<!-- СКРОЛЛ-ТЕКСТ = Х В А Т И Т -->
<div class="gap"></div>
<div class="scroll-text">Хочешь подсказку?</div>

<div class="gap"></div>
<div class="scroll-text">Всё, что нужно, уже на экране.</div>

<div class="gap"></div>
<div class="scroll-text">А ты продолжаешь искать.</div>

<div class="gap"></div>
<div class="scroll-text">Так можно очень долго.</div>

<div class="gap"></div>
<div class="scroll-text">И смысла становится меньше.</div>

<div class="gap"></div>
<div class="scroll-text">Тут нет решения.</div>

<!-- НАСТОЯЩИЙ ФИНАЛ -->
<div class="final">
    <div>…</div>
    <div style="margin-top:20px;">Стоп.</div>
    <div>Хватит крутить.</div>

    <div class="input-block">
        <div>Введите ответ ещё раз:</div>
        <input id="realInput" type="text">
        <button onclick="realCheck()">OK</button>
        <div id="realMsg" class="message"></div>
    </div>
</div>

</div>

<script>
function fakeCheck() {
    const msgs = [
        "Недостаточно данных.",
        "Ты смотришь не туда.",
        "Ответ ускользает.",
        "Продолжай искать.",
        "Кажется, почти."
    ];
    document.getElementById("fakeMsg").innerText =
        msgs[Math.floor(Math.random() * msgs.length)];
}

function normalize(text) {
    return text
        .toUpperCase()
        .replace(/\s+/g, "")
        .replace(/X/g, "Х")
        .replace(/B/g, "В")
        .replace(/A/g, "А")
        .replace(/T/g, "Т")
        .replace(/I/g, "И");
}

function realCheck() {
    const raw = document.getElementById("realInput").value;
    const val = normalize(raw);

    if (val === "ХВАТИТ") {
        document.body.innerHTML = `
        <div style="
            color:white;
            font-family:monospace;
            text-align:center;
            margin-top:35vh;
        ">
            <div>Ты остановился.</div>
            <div style="margin-top:20px;">
                И это был правильный ход.
            </div>

            <a href="https://USERNAME.github.io/STAGE5-REPO/" style="
                display:inline-block;
                margin-top:50px;
                padding:14px 28px;
                border:1px solid white;
                color:white;
                text-decoration:none;
                letter-spacing:3px;
            ">
                ПЕРЕЙТИ К ФИНАЛУ
            </a>
        </div>
        `;
    } else {
        document.getElementById("realMsg").innerText = "";
    }
}
</script>

</body>
</html>
